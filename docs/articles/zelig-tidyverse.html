<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zelig and the Tidyverse • Zelig</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Zelig Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/quickstart.html">Quickstart</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html#section-zelig-overview">Overview</a>
    </li>
    <li>
      <a href="../articles/index.html#section-model-details">Model Details</a>
    </li>
    <li>
      <a href="../articles/index.html#section-other">Other</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Function Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html#section-main-zelig-workflow">Workflow</a>
    </li>
    <li>
      <a href="../reference/index.html#section-estimation-methods">Estimation Methods</a>
    </li>
    <li>
      <a href="../reference/index.html#section-exterior-interaction-functions">Interacting Outside of Zelig</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/about.html">About</a>
</li>
<li>
  <a href="https://medium.com/zelig-dev/archive">
    <span class="fa fa-medium"></span>
     
    Dev-Blog
  </a>
</li>
<li>
  <a href="https://twitter.com/zeligproject">
    <span class="fa fa-twitter fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/IQSS/Zelig">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Zelig and the Tidyverse</h1>
            
            <h4 class="date">2017-02-17</h4>
          </div>

    
    
<div class="contents">
<p><em>Built using Zelig version 5.0.16</em></p>
<p>Many researchers integrate tools from the “<a href="http://tidyverse.org/">tidyverse</a>” into their data workflows. The tidyverse includes a number of packages to read data into R–<a href="https://CRAN.R-project.org/package=readr">readr</a>–, transform it for analysis– <a href="https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html">tibble</a>, <a href="https://CRAN.R-project.org/package=tidyr">tidyr</a>, purr, and dplyr, and visualise the results with <a href="http://docs.ggplot2.org/current/">ggplot2</a>. All of these packages can be loaded in R by loading the tidyverse package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
<p>Zelig can be easily slotted into this workflow for model estimation and identifying quantities of interest. Most Zelig estimation models require underlying data to be in the “tidy” format that the tidyverse creates. Zelig’s three step workflow can be organized very well using <a href="http://r4ds.had.co.nz/pipes.html">pipes</a> (<code>%&gt;%</code>) that the tidyverse advocates. Using pipes with Zelig will make your code more legible and computationally efficient.</p>
<div id="what-is-tidy-data" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#what-is-tidy-data" class="anchor"> </a></body></html>What is “tidy data”</h2>
<p>“Tidy” data is defined as having three qualities <a href="https://www.jstatsoft.org/article/view/v059i10/v59i10.pdf">(Wickham 2014, 4)</a>:</p>
<ol style="list-style-type: decimal">
<li><p>Each variable forms a column.</p></li>
<li><p>Each observation forms a row.</p></li>
<li><p>Each type of observational unit forms a table.</p></li>
</ol>
<p>Data formatted in this way is ideal for most Zelig models.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#example" class="anchor"> </a></body></html>Example</h2>
<p>This example shows one way to integrate the Tidyverse and Zelig into one workflow.</p>
<p>Imagine we used the Tidyverse to create a data set in tidy format that we want to analyse with Zelig:</p>
<pre><code>##              Fertility Agriculture Examination
## Courtelary        80.2        17.0          15
## Delemont          83.1        45.1           6
## Franches-Mnt      92.5        39.7           5
## Moutier           85.8        36.5          12
## Neuveville        76.9        43.5          17
## Porrentruy        76.1        35.3           9</code></pre>
<p>We could then analyse it with Zelig and plot quantities of interest using Tidyverse’s pipe operator. Note the use of <code>data = .</code> this tells the pipe to enter the <code>swiss</code> data object as the value of <code>zelig</code>’s data argument:</p>
<pre><code>swiss %&gt;% 
    zelig(Fertility ~ Agriculture + Examination, model = 'ls', data = ., 
          cite = FALSE) %&gt;%
    setx(Agriculture = seq(1, 90, by = 5)) %&gt;%
    sim() %&gt;% 
    plot()</code></pre>
<p>Note that piping does not work with Zelig 5’s reference classes.</p>
</div>
<div id="zelig-and-ggplot2-in-development" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#zelig-and-ggplot2-in-development" class="anchor"> </a></body></html>Zelig and ggplot2 [IN DEVELOPMENT]</h2>
<p>Zelig’s in-house plots are built using base R plotting functionality. Many researchers now rely heavily on ggplot2 to visualise their results.</p>
<p>One thing we are working on is a new function–<code>zelig_qi_to_df</code>–which will take quantities of interest simulated by <code>sim</code> and return them in a data frame following tidy data principles. This output could be easily plotted with ggplot2.</p>
<p>We are also considering in the future whether to generate Zelig’s default plots with ggplot2.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#what-is-tidy-data">What is “tidy data”</a></li>
      <li><a href="#example">Example</a></li>
      <li><a href="#zelig-and-ggplot2-in-development">Zelig and ggplot2 [IN DEVELOPMENT]</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, Olivia Lau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
